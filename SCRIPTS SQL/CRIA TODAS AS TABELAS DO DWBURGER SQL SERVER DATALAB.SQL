-- Gerado por Oracle SQL Developer Data Modeler 24.3.1.351.0831
--   em:        2025-06-23 20:17:24 BRT
--   site:      SQL Server 2012
--   tipo:      SQL Server 2012

USE DWBURGER
GO

DROP TABLE IF EXISTS F_PEDIDO
GO

DROP TABLE IF EXISTS F_PEDIDO_RSM
GO

DROP TABLE IF EXISTS D_CLIENTE
GO

CREATE TABLE D_CLIENTE 
    (
     SK_CLIENTE SMALLINT NOT NULL IDENTITY NOT FOR REPLICATION , 
     NR_CLIENTE SMALLINT NOT NULL , 
     NM_CLIENTE VARCHAR (160) NOT NULL , 
     DS_TIPO_CLIENTE VARCHAR (15) NOT NULL , 
     QT_ESTRELAS TINYINT , 
     DS_ESTRELAS VARCHAR (20) NOT NULL , 
     VL_MEDIO_COMPRA NUMERIC (8,2) , 
     ST_CLIENTE CHAR (1) , 
     DS_ST_CLIENTE VARCHAR (12) , 
     DS_EMAIL VARCHAR (100) , 
     NR_TELEFONE VARCHAR (20) , 
     DT_NASCIMENTO DATE , 
     DS_FAIXA_ETARIA VARCHAR (30) , 
     FL_SEXO_BIOLOGICO CHAR (1) , 
     DS_GENERO VARCHAR (100) , 
     NR_CPF VARCHAR (14) , 
     DT_FUNDACAO DATE , 
     NR_CNPJ VARCHAR (20) , 
     NR_INSCR_EST VARCHAR (15) , 
     NR_CPF_CNPJ_NUM BIGINT , 
     SG_MACRORREGIAO VARCHAR (2) NOT NULL , 
     NM_MACRORREGIAO VARCHAR (50) NOT NULL , 
     SG_ESTADO CHAR (2) NOT NULL , 
     NM_ESTADO VARCHAR (30) NOT NULL , 
     CD_CIDADE SMALLINT NOT NULL , 
     NM_CIDADE VARCHAR (60) NOT NULL , 
     CD_IBGE INTEGER , 
     NR_DDD TINYINT , 
     CD_BAIRRO INTEGER NOT NULL , 
     NM_BAIRRO VARCHAR (45) NOT NULL , 
     NR_CEP INTEGER NOT NULL , 
     NM_ZONA_BAIRRO VARCHAR (20) , 
     CD_LOGRADOURO_CLI INTEGER NOT NULL , 
     NM_LOGRADOURO VARCHAR (160) NOT NULL , 
     NR_END INTEGER , 
     DS_COMPLEMENTO_END VARCHAR (80) , 
     DS_ENDERECO_COMPLETO VARCHAR (200) NOT NULL , 
     DT_INICIO DATE NOT NULL , 
     DT_TERMINO DATE , 
     DT_ATU_RGT DATETIME , 
     DT_CRI_RGT DATETIME NOT NULL DEFAULT GETDATE() 
    )
GO

ALTER TABLE D_CLIENTE ADD CONSTRAINT D_CLIENTE_PK PRIMARY KEY CLUSTERED (SK_CLIENTE)
     WITH (
     ALLOW_PAGE_LOCKS = ON , 
     ALLOW_ROW_LOCKS = ON )
GO

ALTER TABLE D_CLIENTE ADD CONSTRAINT D_CLIENTE__UN UNIQUE NONCLUSTERED (NR_CLIENTE, CD_LOGRADOURO_CLI)
GO

DROP TABLE IF EXISTS D_DATA 
GO

CREATE TABLE D_DATA 
    (
     SK_DATA INTEGER NOT NULL , 
     DT_REFERENCIA DATE , 
     NR_ANO SMALLINT , 
     NR_SEMESTRE TINYINT , 
     DS_SEMESTRE CHAR (10) , 
     DS_SEMESTRE_ANO CHAR (15) , 
     DS_SEMESTRE_ABV CHAR (5) , 
     DS_SEMESTRE_ANO_ABV CHAR (10) , 
     NR_TRIMESTRE TINYINT , 
     DS_TRIMESTRE CHAR (11) , 
     DS_TRIMESTRE_ANO CHAR (16) , 
     DS_TRIMESTRE_ABV CHAR (5) , 
     DS_TRIMESTRE_ANO_ABV CHAR (11) , 
     NR_MES TINYINT , 
     DS_MES VARCHAR (9) , 
	 NR_ANO_MES INTEGER , 
     DS_MES_ANO VARCHAR (14) , 
     DS_MES_ABV CHAR (3) , 
     DS_MES_ANO_ABV CHAR (8) , 
     DS_ESTACAO_ANO VARCHAR (9) , 
     NR_SEMANA_ANO TINYINT , 
     NR_DIA_SEMANA TINYINT , 
     DS_DIA_SEMANA VARCHAR (13) , 
     DS_DIA_SEMANA_ABV CHAR (3) , 
     DS_DATA_EXTENSO VARCHAR (50) , 
     NR_DIA_MES TINYINT , 
     DS_DIA_UTIL VARCHAR (12) , 
     DS_FERIADO VARCHAR (20) , 
     DS_DATA CHAR (10) , 
     DT_ATU_RGT DATETIME , 
     DT_CRI_RGT DATETIME DEFAULT GETDATE() 
    )
GO

ALTER TABLE D_DATA ADD CONSTRAINT D_DATA_PK PRIMARY KEY CLUSTERED (SK_DATA)
     WITH (
     ALLOW_PAGE_LOCKS = ON , 
     ALLOW_ROW_LOCKS = ON )
GO

DROP TABLE IF EXISTS D_FUNCIONARIO
GO

CREATE TABLE D_FUNCIONARIO 
    (
     SK_FUNCIONARIO SMALLINT NOT NULL IDENTITY NOT FOR REPLICATION , 
     CD_FUNCIONARIO SMALLINT NOT NULL , 
     NM_FUNCIONARIO VARCHAR (160) NOT NULL , 
     DT_NASCIMENTO DATE NOT NULL , 
     NR_IDADE TINYINT , 
     DS_FAIXA_ETARIA VARCHAR (30) NOT NULL , 
     FL_SEXO_BIOLOGICO CHAR (1) NOT NULL , 
     DS_GENERO VARCHAR (100) NOT NULL , 
     VL_SALARIO_BRUTO NUMERIC (8,2) NOT NULL , 
     DS_FAIXA_SALARIAL VARCHAR (20) , 
     VL_SALARIO_FAMILIA NUMERIC (8,2) , 
     QT_TOT_DEPENDENTE TINYINT NOT NULL , 
     ST_FUNC CHAR (1) NOT NULL , 
     DS_ST_FUNCIONARIO VARCHAR (7) NOT NULL , 
     NR_PERC_COMISSAO NUMERIC (5,2) , 
     DT_CADASTRAMENTO DATE NOT NULL , 
     DS_TEMPO_CASA VARCHAR (30) NOT NULL , 
     DT_DESLIGAMENTO DATE , 
     CD_GESTOR SMALLINT , 
     NM_GESTOR VARCHAR (160) , 
     CD_GERENTE SMALLINT , 
     NM_GERENTE VARCHAR (160) , 
     NR_LOJA SMALLINT , 
     NM_LOJA VARCHAR (100) , 
     CD_DEPTO SMALLINT , 
     NM_DEPTO VARCHAR (100) , 
     CD_CARGO SMALLINT , 
     DS_CARGO VARCHAR (50) , 
     DT_INICIO DATETIME NOT NULL , 
     DT_FIM DATETIME , 
     DT_CRI_RGT DATETIME NOT NULL DEFAULT GETDATE() , 
     DT_ATU_RGT DATETIME 
    )
GO

ALTER TABLE D_FUNCIONARIO ADD CONSTRAINT D_FUNCIONARIO_PK PRIMARY KEY CLUSTERED (SK_FUNCIONARIO)
     WITH (
     ALLOW_PAGE_LOCKS = ON , 
     ALLOW_ROW_LOCKS = ON )
GO
ALTER TABLE D_FUNCIONARIO ADD CONSTRAINT D_FUNCIONARIO__UN UNIQUE NONCLUSTERED (CD_FUNCIONARIO, DT_INICIO)
GO

DROP TABLE IF EXISTS D_LOJA
GO

CREATE TABLE D_LOJA 
    (
     SK_LOJA SMALLINT NOT NULL IDENTITY NOT FOR REPLICATION , 
     NR_LOJA SMALLINT NOT NULL , 
     NM_LOJA VARCHAR (100) NOT NULL , 
     DT_INAUGURACAO DATE , 
     SG_MACRORREGIAO VARCHAR (2) NOT NULL , 
     NM_MACRORREGIAO VARCHAR (50) NOT NULL , 
     SG_ESTADO CHAR (2) NOT NULL , 
     NM_ESTADO VARCHAR (30) NOT NULL , 
     CD_CIDADE SMALLINT NOT NULL , 
     NM_CIDADE VARCHAR (60) NOT NULL , 
     CD_IBGE INTEGER , 
     NR_DDD TINYINT , 
     CD_BAIRRO INTEGER NOT NULL , 
     NM_BAIRRO VARCHAR (45) NOT NULL , 
     NR_CEP INTEGER NOT NULL , 
     NM_ZONA_BAIRRO VARCHAR (20) , 
     CD_LOGRADOURO INTEGER NOT NULL , 
     NM_LOGRADOURO VARCHAR (160) NOT NULL , 
     CD_LOJA_END INTEGER NOT NULL , 
     NR_END INTEGER , 
     DS_COMPLEMENTO_END VARCHAR (80) , 
     DS_ENDERECO_COMPLETO VARCHAR (200) NOT NULL , 
     DT_INICIO DATE NOT NULL , 
     DT_TERMINO DATE , 
     DT_ATU_RGT DATETIME , 
     DT_CRI_RGT DATETIME NOT NULL DEFAULT GETDATE() 
    )
GO

ALTER TABLE D_LOJA ADD CONSTRAINT D_LOJA_PK PRIMARY KEY CLUSTERED (SK_LOJA)
     WITH (
     ALLOW_PAGE_LOCKS = ON , 
     ALLOW_ROW_LOCKS = ON )
GO

ALTER TABLE D_LOJA ADD CONSTRAINT D_LOJA__UN UNIQUE NONCLUSTERED (NR_LOJA, CD_LOJA_END)
GO

ALTER TABLE D_LOJA ADD DS_CATEGORIA_LOJA VARCHAR(10)
GO

DROP TABLE IF EXISTS D_PRODUTO 
GO

CREATE TABLE D_PRODUTO
    (
     SK_PRODUTO SMALLINT NOT NULL IDENTITY NOT FOR REPLICATION , 
     CD_PRODUTO SMALLINT NOT NULL , 
     CD_CATEGORIA_PROD SMALLINT NOT NULL , 
     DS_CATEGORIA_PROD VARCHAR (100) NOT NULL , 
     ST_CATEGORIA_PROD CHAR (1) NOT NULL , 
     DS_ST_CATEGORIA VARCHAR (7) NOT NULL , 
     CD_SUB_CATEGORIA_PROD SMALLINT NOT NULL , 
     DS_SUB_CATEGORIA_PROD VARCHAR (100) NOT NULL , 
     ST_SUB_CATEGORIA_PROD CHAR (1) NOT NULL , 
     DS_ST_SUB_CATEGORIA_PROD VARCHAR (7) NOT NULL , 
     DS_PRODUTO VARCHAR (80) NOT NULL , 
     VL_UNITARIO NUMERIC (8,2) NOT NULL , 
     VL_PERC_LUCRO NUMERIC (8,2) , 
     TP_EMBALAGEM VARCHAR (15) NOT NULL , 
     ST_PRODUTO CHAR (1) NOT NULL , 
     DS_ST_PRODUTO VARCHAR (7) NOT NULL , 
     DS_COMPLETA VARCHAR (4000) , 
     DT_INICIO DATETIME NOT NULL , 
     DT_FIM DATETIME , 
     DT_CRI_RGT DATETIME NOT NULL DEFAULT GETDATE() , 
     DT_ATU_RGT DATETIME 
    )
GO

ALTER TABLE D_PRODUTO ADD CONSTRAINT D_PRODUTO_PK PRIMARY KEY CLUSTERED (SK_PRODUTO)
     WITH (
     ALLOW_PAGE_LOCKS = ON , 
     ALLOW_ROW_LOCKS = ON )
GO
ALTER TABLE D_PRODUTO ADD CONSTRAINT D_PRODUTO__UN UNIQUE NONCLUSTERED (CD_PRODUTO, DT_INICIO)
GO

DROP TABLE IF EXISTS D_STATUS_TIPO
GO

CREATE TABLE D_STATUS_TIPO 
    (
     SK_STATUS_TIPO SMALLINT NOT NULL IDENTITY NOT FOR REPLICATION , 
     ST_PEDIDO CHAR (1) , 
     DS_ST_PEDIDO VARCHAR (7) , 
     CD_FORMA_PAGTO SMALLINT , 
     DS_FORMA_PAGTO VARCHAR (30) , 
     ST_FORMA_PAGTO CHAR (1) , 
     DS_ST_FORMA_PAGTO VARCHAR (7) , 
     CD_TIPO_PEDIDO CHAR (1) , 
     DS_TIPO_PEDIDO VARCHAR (8) , 
     DT_ATU_RGT DATETIME , 
     DT_CRI_RGT DATETIME NOT NULL DEFAULT GETDATE() 
    )
GO

ALTER TABLE D_STATUS_TIPO ADD CONSTRAINT D_STATUS_TIPO_PK PRIMARY KEY CLUSTERED (SK_STATUS_TIPO)
     WITH (
     ALLOW_PAGE_LOCKS = ON , 
     ALLOW_ROW_LOCKS = ON )
GO

ALTER TABLE D_STATUS_TIPO ADD CONSTRAINT D_STATUS_TIPO__UN UNIQUE NONCLUSTERED (ST_PEDIDO, CD_FORMA_PAGTO, CD_TIPO_PEDIDO)
GO

DROP TABLE IF EXISTS F_PEDIDO
GO

CREATE TABLE F_PEDIDO 
    (
     NR_LOJA SMALLINT NOT NULL , 
     NR_PEDIDO INTEGER NOT NULL , 
     NR_ITEM TINYINT NOT NULL , 
     SK_DT_PEDIDO INTEGER NOT NULL , 
     SK_DT_PREV_ENTREGA INTEGER NOT NULL , 
     SK_CLIENTE SMALLINT NOT NULL , 
     SK_PRODUTO SMALLINT NOT NULL , 
     SK_LOJA SMALLINT NOT NULL , 
     SK_FUNC_ATD SMALLINT NOT NULL , 
     SK_FUNC_MOTOBOY SMALLINT NOT NULL , 
     SK_STATUS_TIPO SMALLINT NOT NULL , 
     QT_PEDIDO TINYINT NOT NULL , 
     VL_UNITARIO NUMERIC (8,2) NOT NULL , 
     VL_PEDIDO NUMERIC (8,2) NOT NULL , 
     VL_LUCRO_LIQUIDO NUMERIC (8,2) NOT NULL , 
     QT_DE_PEDIDOS TINYINT NOT NULL , 
     DT_ATU_RGT DATETIME , 
     DT_CRI_RGT DATETIME NOT NULL DEFAULT GETDATE() 
    )
GO

ALTER TABLE F_PEDIDO ADD CONSTRAINT F_PEDIDO_PK PRIMARY KEY CLUSTERED (NR_LOJA, NR_PEDIDO, NR_ITEM)
     WITH (
     ALLOW_PAGE_LOCKS = ON , 
     ALLOW_ROW_LOCKS = ON )
GO

ALTER TABLE F_PEDIDO 
    ADD CONSTRAINT F_PEDIDO_D_CLIENTE_FK FOREIGN KEY 
    ( 
     SK_CLIENTE
    ) 
    REFERENCES D_CLIENTE 
    ( 
     SK_CLIENTE 
    ) 
    ON DELETE NO ACTION 
    ON UPDATE NO ACTION 
GO

ALTER TABLE F_PEDIDO 
    ADD CONSTRAINT F_PEDIDO_D_DATA_ENT_FK FOREIGN KEY 
    ( 
     SK_DT_PREV_ENTREGA
    ) 
    REFERENCES D_DATA 
    ( 
     SK_DATA 
    ) 
    ON DELETE NO ACTION 
    ON UPDATE NO ACTION 
GO

ALTER TABLE F_PEDIDO 
    ADD CONSTRAINT F_PEDIDO_D_DATA_PED_FK FOREIGN KEY 
    ( 
     SK_DT_PEDIDO
    ) 
    REFERENCES D_DATA 
    ( 
     SK_DATA 
    ) 
    ON DELETE NO ACTION 
    ON UPDATE NO ACTION 
GO

ALTER TABLE F_PEDIDO 
    ADD CONSTRAINT F_PEDIDO_D_FUNC_ATD_FK FOREIGN KEY 
    ( 
     SK_FUNC_ATD
    ) 
    REFERENCES D_FUNCIONARIO 
    ( 
     SK_FUNCIONARIO 
    ) 
    ON DELETE NO ACTION 
    ON UPDATE NO ACTION 
GO

ALTER TABLE F_PEDIDO 
    ADD CONSTRAINT F_PEDIDO_D_FUNCMOTOBOY_FK FOREIGN KEY 
    ( 
     SK_FUNC_MOTOBOY
    ) 
    REFERENCES D_FUNCIONARIO 
    ( 
     SK_FUNCIONARIO 
    ) 
    ON DELETE NO ACTION 
    ON UPDATE NO ACTION 
GO

ALTER TABLE F_PEDIDO 
    ADD CONSTRAINT F_PEDIDO_D_LOJA_FK FOREIGN KEY 
    ( 
     SK_LOJA
    ) 
    REFERENCES D_LOJA 
    ( 
     SK_LOJA 
    ) 
    ON DELETE NO ACTION 
    ON UPDATE NO ACTION 
GO

ALTER TABLE F_PEDIDO 
    ADD CONSTRAINT F_PEDIDO_D_PRODUTO_FK FOREIGN KEY 
    ( 
     SK_PRODUTO
    ) 
    REFERENCES D_PRODUTO 
    ( 
     SK_PRODUTO 
    ) 
    ON DELETE NO ACTION 
    ON UPDATE NO ACTION 
GO

ALTER TABLE F_PEDIDO 
    ADD CONSTRAINT F_PEDIDO_D_STATUS_TIPO_FK FOREIGN KEY 
    ( 
     SK_STATUS_TIPO
    ) 
    REFERENCES D_STATUS_TIPO 
    ( 
     SK_STATUS_TIPO 
    ) 
    ON DELETE NO ACTION 
    ON UPDATE NO ACTION 
GO

DROP TABLE IF EXISTS F_PEDIDO_RSM
GO

CREATE TABLE F_PEDIDO_RSM 
    (
     SK_MES_PEDIDO INTEGER NOT NULL , 
     SK_CLIENTE SMALLINT NOT NULL , 
     SK_LOJA SMALLINT NOT NULL , 
     VL_PEDIDO NUMERIC (8,2) NOT NULL , 
     VL_LUCRO_LIQUIDO NUMERIC (8,2) NOT NULL , 
     QT_DE_PEDIDOS TINYINT NOT NULL ,
     DT_ATU_RGT DATETIME , 
     DT_CRI_RGT DATETIME NOT NULL DEFAULT GETDATE() 
    )
GO

ALTER TABLE F_PEDIDO_RSM ADD CONSTRAINT F_PEDIDO_RSM_PK PRIMARY KEY CLUSTERED (SK_MES_PEDIDO, SK_CLIENTE, SK_LOJA)
     WITH (
     ALLOW_PAGE_LOCKS = ON , 
     ALLOW_ROW_LOCKS = ON )
GO

ALTER TABLE F_PEDIDO_RSM 
    ADD CONSTRAINT F_PEDIDO_RSM_D_CLIENTE_FK FOREIGN KEY 
    ( 
     SK_CLIENTE
    ) 
    REFERENCES D_CLIENTE 
    ( 
     SK_CLIENTE 
    ) 
    ON DELETE NO ACTION 
    ON UPDATE NO ACTION 
GO

ALTER TABLE F_PEDIDO_RSM 
    ADD CONSTRAINT F_PEDIDO_RSM_D_DATA_FK FOREIGN KEY 
    ( 
     SK_MES_PEDIDO
    ) 
    REFERENCES D_DATA 
    ( 
     SK_DATA 
    ) 
    ON DELETE NO ACTION 
    ON UPDATE NO ACTION 
GO

ALTER TABLE F_PEDIDO_RSM 
    ADD CONSTRAINT F_PEDIDO_RSM_D_LOJA_FK FOREIGN KEY 
    ( 
     SK_LOJA
    ) 
    REFERENCES D_LOJA 
    ( 
     SK_LOJA 
    ) 
    ON DELETE NO ACTION 
    ON UPDATE NO ACTION 
GO

-- Relatório do Resumo do Oracle SQL Developer Data Modeler: 
-- 
-- CREATE TABLE                             8
-- CREATE INDEX                             0
-- ALTER TABLE                             23
-- CREATE VIEW                              0
-- ALTER VIEW                               0
-- CREATE PACKAGE                           0
-- CREATE PACKAGE BODY                      0
-- CREATE PROCEDURE                         0
-- CREATE FUNCTION                          0
-- CREATE TRIGGER                           0
-- ALTER TRIGGER                            0
-- CREATE DATABASE                          0
-- CREATE DEFAULT                           0
-- CREATE INDEX ON VIEW                     0
-- CREATE ROLLBACK SEGMENT                  0
-- CREATE ROLE                              0
-- CREATE RULE                              0
-- CREATE SCHEMA                            0
-- CREATE SEQUENCE                          0
-- CREATE PARTITION FUNCTION                0
-- CREATE PARTITION SCHEME                  0
-- 
-- DROP DATABASE                            0
-- 
-- ERRORS                                   0
-- WARNINGS                                 0
